<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WCAG Theme Inspector</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define default CSS variables for theming */
        :root {
            /* SEPARATED COLOR CONTROLS */
            --theme-button-accent: #1D4ED8; /* Primary Button Color */
            --theme-heading-color: #1F2937; /* Headings (H2, H3) Color */
            --theme-border-color: #1D4ED8;  /* All Card Border Color */
            --theme-link-color: #1D4ED8;    /* Link (Anchor) Color */
            
            --theme-bg: #F9FAFB;      /* Page Background color */
            --theme-card-bg: #ffffff; /* Card/Content Background color */
            
            --theme-text-on-primary: #ffffff; /* Text color on the primary button */
            --theme-text-color: #1F2937; /* Default body text color */
            --theme-font-family: system-ui, sans-serif;
        }

        /* Apply NEW Font Family and Text Color to the body */
        body {
            color: var(--theme-text-color);
            font-family: var(--theme-font-family);
        }
        
        /* Apply CSS variables to Tailwind classes using JIT structure */
        .bg-theme-bg { background-color: var(--theme-bg); }
        .bg-theme-card-bg { background-color: var(--theme-card-bg); }
        
        /* Heading Color */
        .text-theme-heading-color { color: var(--theme-heading-color); }
        /* Link Color */
        .text-theme-link-color { color: var(--theme-link-color); }

        /* Custom primary button styles (uses button accent) */
        .btn-primary {
            background-color: var(--theme-button-accent);
            color: var(--theme-text-on-primary);
            transition: background-color 0.15s ease-in-out;
        }

        .btn-primary:hover {
            /* Darkens the button color slightly on hover */
            background-color: color-mix(in srgb, var(--theme-button-accent) 85%, black);
        }

        /* All Card Border Color */
        .border-theme-border-color {
            border-color: var(--theme-border-color);
        }
        
        /* Specific text elements for color demonstration */
        .text-body-secondary {
            color: color-mix(in srgb, var(--theme-text-color) 70%, transparent); /* Lighter version of main text color */
        }

        /* Styling for the contrast status box */
        .contrast-status {
            @apply text-xs font-semibold px-2 py-0.5 rounded-md;
            /* Pass/Fail colors are managed by JS for subtle appearance */
        }
    </style>
</head>
<body class="bg-theme-bg antialiased transition-colors duration-300">

    <div class="min-h-screen flex flex-col">
        
        <!-- Theme Controls (Fixed Bar) - Full-width, single-line color and control sections -->
        <header class="w-full shadow-lg p-4 sticky top-0 z-10 bg-white/95 backdrop-blur-sm">
            
            <!-- 1. FULL-WIDTH COLOR PICKERS (7 controls in ONE responsive row) -->
            <!-- Layout: grid-cols-2 on small, up to lg:grid-cols-7 for single row -->
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 gap-4 pb-4 border-b border-gray-200">
                
                <!-- Page Background Color Picker (1/7) -->
                <div class="flex items-center space-x-2">
                    <label for="bgColor" class="text-sm font-medium text-gray-600 whitespace-nowrap">Page BG:</label>
                    <input type="color" id="bgColor" value="#F9FAFB" class="h-8 w-8 rounded-lg border-2 border-gray-300 cursor-pointer">
                </div>

                <!-- Card Background Color Picker (2/7) -->
                <div class="flex items-center space-x-2">
                    <label for="cardBgColor" class="text-sm font-medium text-gray-600 whitespace-nowrap">Card BG:</label>
                    <input type="color" id="cardBgColor" value="#ffffff" class="h-8 w-8 rounded-lg border-2 border-gray-300 cursor-pointer">
                </div>

                <!-- Text Color Picker (3/7) -->
                <div class="flex items-center space-x-2">
                    <label for="textColor" class="text-sm font-medium text-gray-600 whitespace-nowrap">Body Text:</label>
                    <input type="color" id="textColor" value="#1F2937" class="h-8 w-8 rounded-lg border-2 border-gray-300 cursor-pointer">
                </div>
                
                <!-- Button Accent Color Picker (4/7) -->
                <div class="flex items-center space-x-2">
                    <label for="buttonAccentColor" class="text-sm font-medium text-gray-600 whitespace-nowrap">Button Accent:</label>
                    <input type="color" id="buttonAccentColor" value="#1D4ED8" class="h-8 w-8 rounded-lg border-2 border-gray-300 cursor-pointer">
                </div>
                
                <!-- Heading Color Picker (5/7) -->
                <div class="flex items-center space-x-2">
                    <label for="headingColor" class="text-sm font-medium text-gray-600 whitespace-nowrap">Title/H Color:</label>
                    <input type="color" id="headingColor" value="#1F2937" class="h-8 w-8 rounded-lg border-2 border-gray-300 cursor-pointer">
                </div>

                <!-- Link Color Picker (6/7) -->
                <div class="flex items-center space-x-2">
                    <label for="linkColor" class="text-sm font-medium text-gray-600 whitespace-nowrap">Link Color:</label>
                    <input type="color" id="linkColor" value="#1D4ED8" class="h-8 w-8 rounded-lg border-2 border-gray-300 cursor-pointer">
                </div>

                <!-- Border Color Picker (7/7) -->
                <div class="flex items-center space-x-2">
                    <label for="borderColor" class="text-sm font-medium text-gray-600 whitespace-nowrap">Card Border:</label>
                    <input type="color" id="borderColor" value="#1D4ED8" class="h-8 w-8 rounded-lg border-2 border-gray-300 cursor-pointer">
                </div>
            </div>
            <!-- End Full-Width Color Pickers -->


            <!-- 2. FULL-WIDTH SECONDARY CONTROLS (Font, Preset, WCAG Status) - All on one line for large screens -->
            <div class="flex flex-wrap items-center gap-x-6 gap-y-3 pt-4"> 
            
                <!-- Font Style Dropdown -->
                <div class="flex items-center space-x-2">
                    <label for="fontSelector" class="text-sm font-bold text-gray-700 whitespace-nowrap">Font Style:</label>
                    <select id="fontSelector" class="p-1.5 border border-gray-300 rounded-lg text-sm shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150">
                        <option value="system-ui, sans-serif">Default Sans</option>
                        <option value="Inter, sans-serif">Inter (Modern)</option>
                        <option value="Georgia, serif">Georgia (Serif)</option>
                        <option value="ui-monospace, monospace">Monospace (Code)</option>
                        <option value="serif">System Serif</option>
                    </select>
                </div>

                <!-- Preset Dropdown -->
                <div class="flex items-center space-x-2">
                    <label for="presetSelector" class="text-sm font-bold text-gray-700 whitespace-nowrap">Apply Preset:</label>
                    <select id="presetSelector" class="block p-1.5 border border-gray-300 rounded-lg shadow-sm text-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150">
                        <!-- Options populated by JavaScript -->
                    </select>
                </div>
                
                <!-- Separator (Hidden on small screens) -->
                <span class="text-sm font-bold text-gray-700 hidden lg:inline">|</span> 

                <!-- WCAG Contrast Status 1: Body Text vs. Card BG (Simplified Label) -->
                <div class="flex items-center space-x-2 text-sm">
                    <span class="font-bold text-gray-700 whitespace-nowrap">Body Text:</span>
                    <span id="textCardContrastRatio" class="ml-1 font-mono text-gray-800">?:1</span>
                    <span id="textCardStatus" class="contrast-status bg-gray-200 text-gray-700">Checking...</span>
                </div>
                
                <!-- WCAG Contrast Status 2: Link Color vs. Card BG (Simplified Label) -->
                <div class="flex items-center space-x-2 text-sm">
                    <span class="font-bold text-gray-700 whitespace-nowrap">Link:</span>
                    <span id="accentCardContrastRatio" class="ml-1 font-mono text-gray-800">?:1</span>
                    <span id="accentCardStatus" class="contrast-status bg-gray-200 text-gray-700">Checking...</span>
                </div>
            </div>
            <!-- End Full-Width Secondary Controls -->
        </header>

        <!-- Main Content Preview Area -->
        <main class="flex-grow">
            
            <!-- Dummy Navbar/Hero Section (Simulates the top of a website) - NOW FULL WIDTH -->
            <!-- This container spans 100% width and uses horizontal padding (mx-4 sm:mx-8) -->
            <div class="text-center py-12 mb-8 mt-8 bg-theme-card-bg rounded-xl shadow-xl border-2 border-theme-border-color transition-colors duration-300 mx-4 sm:mx-8">
                <h1 class="text-4xl font-extrabold text-theme-heading-color transition-colors duration-300">
                    WCAG Theme Inspector
                </h1>
                <p class="mt-2 text-lg text-body-secondary">
                    A professional design system tool for accessibility and theme tuning.
                </p>
            </div>
            <!-- END NEW: Dummy Navbar/Hero Section -->

            <!-- Content Cards Container (MAX WIDTH, centered, with padding) -->
            <div class="max-w-4xl mx-auto p-4 sm:p-0 space-y-10">
                
                <!-- Heading and Link Contrast Showcase -->
                <section class="p-6 rounded-xl shadow-xl bg-theme-card-bg border-2 border-theme-border-color transition-colors duration-300">
                    <!-- H2 now uses the dedicated heading color -->
                    <h2 class="text-2xl font-bold mb-4 text-theme-heading-color transition-colors duration-300">
                        Content Block Title
                    </h2>
                    <p class="text-body-secondary">
                        This section shows how the main heading, secondary text, and links render with the current theme settings. Pay close attention to the live WCAG contrast checks in the fixed header above.
                    </p>
                    <!-- Link now uses the dedicated link color -->
                    <a href="#" class="text-theme-link-color font-medium hover:underline transition-colors duration-300">
                        This simulated link uses the Link Color setting.
                    </a>
                </section>

                <!-- Card and Button Component Showcase -->
                <section class="grid md:grid-cols-2 gap-6">
                    
                    <!-- Content Card 1 (Standard) -->
                    <!-- Border now uses the dedicated border color -->
                    <div class="p-6 rounded-xl shadow-xl bg-theme-card-bg border-2 border-theme-border-color transition-colors duration-300">
                        <!-- H3 now uses the dedicated heading color -->
                        <h3 class="text-xl font-semibold mb-3 text-theme-heading-color">Information Card</h3>
                        <p class="mb-4 text-body-secondary text-sm">
                            The card titles and all card borders are unified under their own color controls, allowing you to define a clear boundary color for your components.
                        </p>
                        <button class="btn-primary py-2 px-4 rounded-lg font-semibold shadow-md hover:shadow-lg transition duration-200 text-sm">
                            Primary Button (Accent)
                        </button>
                    </div>

                    <!-- Content Card 2 (Highlight) -->
                    <!-- Border now uses the dedicated border color -->
                    <div class="p-6 rounded-xl shadow-xl bg-theme-card-bg border-2 border-theme-border-color transition-colors duration-300">
                        <!-- H3 now uses the dedicated heading color -->
                        <h3 class="text-xl font-semibold mb-3 text-theme-heading-color">Call to Action</h3>
                        <p class="mb-4 text-body-secondary text-sm">
                            Use this card to test how distinct heading, link, button, and border colors look together to achieve visual hierarchy.
                        </p>
                        <button class="btn-primary py-2 px-4 rounded-lg font-semibold shadow-md hover:shadow-lg transition duration-200 text-sm">
                            Get Started
                        </button>
                    </div>
                </section>

                <!-- Footer Preview -->
                <footer class="text-center py-6 border-t border-gray-200 mt-10">
                    <p class="text-sm text-body-secondary">
                        &copy; 2025 WCAG Theme Inspector. Developed By Ashirvaad
                    </p>
                </footer>
            </div>
        </main>
    </div>

    <script>
        // Renamed/New Inputs
        const buttonAccentColorInput = document.getElementById('buttonAccentColor');
        const headingColorInput = document.getElementById('headingColor');
        const borderColorInput = document.getElementById('borderColor');
        const linkColorInput = document.getElementById('linkColor');
        
        // Existing Inputs
        const bgColorInput = document.getElementById('bgColor');
        const cardBgColorInput = document.getElementById('cardBgColor');
        const textColorInput = document.getElementById('textColor');
        const presetSelector = document.getElementById('presetSelector');
        const fontSelector = document.getElementById('fontSelector');
        const root = document.documentElement;
        
        // WCAG Status Elements
        const textCardRatioEl = document.getElementById('textCardContrastRatio');
        const textCardStatusEl = document.getElementById('textCardStatus');
        const accentCardRatioEl = document.getElementById('accentCardContrastRatio');
        const accentCardStatusEl = document.getElementById('accentCardStatus');


        // Define Presets (Updated to include link color)
        const colorPresets = [
            // isCustom is a flag to handle the default selected state
            { name: "— Custom Colors —", buttonAccent: "", heading: "", border: "", link: "", pageBg: "", cardBg: "", textColor: "", isCustom: true },
            { name: "Ocean Breeze (Light)", buttonAccent: "#0369A1", heading: "#1F2937", border: "#4CC9F0", link: "#0077B6", pageBg: "#F8FAFC", cardBg: "#FFFFFF", textColor: "#1F2937" },
            { name: "Midnight Glow (Dark)", buttonAccent: "#34D399", heading: "#F3F4F6", border: "#34D399", link: "#6EE7B7", pageBg: "#0F172A", cardBg: "#1E293B", textColor: "#F3F4F6" },
            { name: "Solar Flare (High Contrast)", buttonAccent: "#DC2626", heading: "#333333", border: "#FFC300", link: "#F59E0B", pageBg: "#FDF4EE", cardBg: "#FFFFFF", textColor: "#333333" },
            { name: "Forest Trail (Earthy)", buttonAccent: "#10B981", heading: "#1E3B08", border: "#34D399", link: "#047857", pageBg: "#F0FDF4", cardBg: "#FFFFFF", textColor: "#1E3B08" },
            { name: "Volcanic Ash (Dark Red)", buttonAccent: "#EF4444", heading: "#E5E7EB", border: "#F87171", link: "#FCA5A5", pageBg: "#1F2937", cardBg: "#374151", textColor: "#E5E7EB" },
            { name: "Electric Violet (Pop)", buttonAccent: "#8B5CF6", heading: "#111827", border: "#A78BFA", link: "#6366F1", pageBg: "#F3F4F6", cardBg: "#FFFFFF", textColor: "#111827" },
        ];


        // --- Core Functions for Contrast and Luminance (Unchanged) ---

        /**
         * Converts a hex color string (e.g., "#RRGGBB") to an RGB object {r, g, b}.
         */
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        /**
         * Calculates the Relative Luminance (L) of an RGB color, per WCAG standards.
         */
        function getLuminance({ r, g, b }) {
            const components = [r, g, b].map(v => {
                v /= 255;
                return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
            });
            return 0.2126 * components[0] + 0.7152 * components[1] + 0.0722 * components[2];
        }

        /**
         * Calculates the Contrast Ratio between two hex colors.
         */
        function getContrastRatio(hex1, hex2) {
            const rgb1 = hexToRgb(hex1);
            const rgb2 = hexToRgb(hex2);

            if (!rgb1 || !rgb2) return 1;

            const L1 = getLuminance(rgb1);
            const L2 = getLuminance(rgb2);

            const brightL = Math.max(L1, L2);
            const darkL = Math.min(L1, L2);

            return (brightL + 0.05) / (darkL + 0.05);
        }

        /**
         * Determines the best text color (white or black) for a given background color.
         */
        function getTextColorForContrast(backgroundColorHex) {
            const rgb = hexToRgb(backgroundColorHex);
            if (!rgb) return '#000000'; 
            
            const luminance = getLuminance(rgb);
            return luminance > 0.179 ? '#000000' : '#ffffff';
        }

        /**
         * Determines WCAG compliance for a given ratio.
         * MODIFIED: Removes background color for AA/AAA pass states.
         */
        function checkWcagCompliance(ratio) {
            let status = 'Fail';
            // Default fail state retains background for visibility
            let className = 'bg-red-200 text-red-800 border border-red-200'; 

            if (ratio >= 7.0) {
                status = 'AAA Pass';
                // Pass states use border and text color for subtle look
                className = 'text-green-700 border border-green-700 bg-transparent'; 
            } else if (ratio >= 4.5) {
                status = 'AA Pass';
                // Pass states use border and text color for subtle look
                className = 'text-green-600 border border-green-600 bg-transparent'; 
            }
            
            return { status, className };
        }

        /**
         * Updates the UI elements with the ratio and compliance status.
         */
        function updateWcagStatus() {
            const textColor = textColorInput.value;
            const cardBgColor = cardBgColorInput.value;
            const linkColor = linkColorInput.value;

            // 1. Text Color vs. Card Background (Standard Content Readability)
            const textCardRatio = getContrastRatio(textColor, cardBgColor);
            const textCardResult = checkWcagCompliance(textCardRatio);
            
            textCardRatioEl.textContent = textCardRatio.toFixed(2) + ':1';
            textCardStatusEl.textContent = textCardResult.status;
            textCardStatusEl.className = `contrast-status ${textCardResult.className}`;


            // 2. Link Color vs. Card Background (Link Readability)
            const accentCardRatio = getContrastRatio(linkColor, cardBgColor);
            const accentCardResult = checkWcagCompliance(accentCardRatio);

            accentCardRatioEl.textContent = accentCardRatio.toFixed(2) + ':1';
            accentCardStatusEl.textContent = accentCardResult.status;
            accentCardStatusEl.className = `contrast-status ${accentCardResult.className}`;
        }


        // --- Theme Application Logic (Updated for 6 colors) ---

        function applyTheme() {
            const buttonAccentColor = buttonAccentColorInput.value;
            const headingColor = headingColorInput.value;
            const borderColor = borderColorInput.value;
            const linkColor = linkColorInput.value;
            const bgColor = bgColorInput.value;
            const cardBgColor = cardBgColorInput.value;
            const textColor = textColorInput.value;

            // 1. Apply colors to CSS variables
            root.style.setProperty('--theme-button-accent', buttonAccentColor);
            root.style.setProperty('--theme-heading-color', headingColor);
            root.style.setProperty('--theme-border-color', borderColor);
            root.style.setProperty('--theme-link-color', linkColor);
            root.style.setProperty('--theme-bg', bgColor);
            root.style.setProperty('--theme-card-bg', cardBgColor);
            root.style.setProperty('--theme-text-color', textColor);
            
            document.body.classList.remove('bg-gray-50'); 
            document.body.style.backgroundColor = bgColor;


            // 2. Calculate and apply the text color for the primary button
            const textOnPrimaryColor = getTextColorForContrast(buttonAccentColor);
            root.style.setProperty('--theme-text-on-primary', textOnPrimaryColor);
            
            // 3. Update the live WCAG status display
            updateWcagStatus();
        }
        
        // Function to populate the dropdown options
        function populatePresets() {
            colorPresets.forEach(preset => {
                const option = document.createElement('option');
                option.textContent = preset.name;
                
                const colorData = {
                    buttonAccent: preset.buttonAccent,
                    heading: preset.heading,
                    border: preset.border,
                    link: preset.link,
                    pageBg: preset.pageBg,
                    cardBg: preset.cardBg,
                    textColor: preset.textColor
                };
                option.value = JSON.stringify(colorData);
                
                if (preset.isCustom) {
                    option.selected = true;
                    // Store the current custom colors on load
                    option.value = JSON.stringify({
                        buttonAccent: buttonAccentColorInput.value,
                        heading: headingColorInput.value,
                        border: borderColorInput.value,
                        link: linkColorInput.value,
                        pageBg: bgColorInput.value,
                        cardBg: cardBgColorInput.value,
                        textColor: textColorInput.value
                    });
                }

                presetSelector.appendChild(option);
            });
        }

        /**
         * Handles the change event on the preset dropdown.
         */
        function handlePresetChange(event) {
            const selectedValue = event.target.value;
            
            if (event.target.selectedIndex === 0) {
                return;
            }

            try {
                const colors = JSON.parse(selectedValue);
                
                // Update the color picker inputs
                buttonAccentColorInput.value = colors.buttonAccent;
                headingColorInput.value = colors.heading;
                borderColorInput.value = colors.border;
                linkColorInput.value = colors.link;
                bgColorInput.value = colors.pageBg;
                cardBgColorInput.value = colors.cardBg;
                textColorInput.value = colors.textColor;

                applyTheme();
            } catch (e) {
                console.error("Invalid preset value selected:", e);
            }
        }
        
        /**
         * Handles the change event on the font style dropdown.
         */
        function handleFontChange(event) {
            const selectedFont = event.target.value;
            root.style.setProperty('--theme-font-family', selectedFont);
        }

        // --- Event Listeners ---

        buttonAccentColorInput.addEventListener('input', applyTheme);
        headingColorInput.addEventListener('input', applyTheme);
        borderColorInput.addEventListener('input', applyTheme);
        linkColorInput.addEventListener('input', applyTheme);
        bgColorInput.addEventListener('input', applyTheme);
        cardBgColorInput.addEventListener('input', applyTheme);
        textColorInput.addEventListener('input', applyTheme);
        
        presetSelector.addEventListener('change', handlePresetChange);
        fontSelector.addEventListener('change', handleFontChange);

        // Initialize theme and presets on load
        window.onload = () => {
            populatePresets();
            applyTheme();
        };
    </script>
</body>
</html>




